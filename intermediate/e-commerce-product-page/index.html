<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <!-- displays site properly based on user's device -->

    <link rel="icon"
          type="image/png"
          sizes="32x32"
          href="./images/favicon-32x32.png">

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Frontend Mentor |
        E-commerce product
        page</title>

    <link rel="preconnect"
          href="https://fonts.googleapis.com">
    <link rel="preconnect"
          href="https://fonts.gstatic.com"
          crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kumbh+Sans:wght@100..900&display=swap"
          rel="stylesheet">

    <style type="text/tailwindcss">
        @theme {
            --breakpoint-mobile: 375px;
            --breakpoint-desktop: 1440px;

            /* Primary */
            --color-orange: hsl(26, 100%, 55%);
            --color-orange-pale: hsl(25, 100%, 94%);

            /* Neutral */
            --color-very-dark-blue: hsl(220, 13%, 13%);
            --color-dark-grayish-blue: hsl(219, 9%, 45%);
            --color-grayish-blue: hsl(220, 14%, 75%);
            --color-light-grayish-blue: hsl(223, 64%, 98%);

            --font-kumbh-sans: 'Kumbh Sans', sans-serif;
        }
    </style>
</head>
<body class="font-kumbh-sans">

<!-- Header -->
<header class="relative flex justify-between items-center p-6 border-b">
    <div class="flex items-center gap-4">
        <!-- Mobile Menu Icon -->
        <button id="menu-open-btn"
                class="cursor-pointer lg:hidden">
            <img src="./images/icon-menu.svg"
                 alt="Menu icon">
        </button>
        <!-- Logo -->
        <a href="#"><img
                src="./images/logo.svg"
                alt="Sneaker Company logo"></a>
    </div>

    <div class="flex items-center gap-6">
        <!-- Cart Icon -->
        <button id="cart-btn"
                class="relative">
            <!-- Cart Badge -->
            <span id="cart-badge"
                  class="hidden absolute -top-2 -right-2 bg-orange text-white text-[10px] font-bold px-2 rounded-full"></span>
            <img src="./images/icon-cart.svg"
                 alt="Shopping cart icon"/>
        </button>
        <!-- Avatar -->
        <button>
            <img src="./images/image-avatar.png"
                 alt="User avatar"
                 class="w-8 h-8 rounded-full border-2 border-transparent hover:border-orange"/>
        </button>
    </div>

    <!-- Cart Popup -->
    <div id="cart-popup"
         class="hidden absolute top-[95%] left-0 right-0 mx-auto w-[90%] max-w sm bg-white rounded lg shadow-2xl z-20">
        <h3 class="font-bold p-6 border-b border-light-grayish-blue">
            Cart</h3>
        <div class="p-6 min-h-[150px] flex items-center justify-center">
            <!--Empty Cart Message -->
            <p id="empty-cart-message"
               class="text-dark-grayish-blue font-bold">
                Your cart is
                empty.</p>

            <!-- Filled Card Content (hidden by default) -->
            <div id="filled-cart-content"
                 class="hidden w-full space-y-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <img src="./images/image-product-1-thumbnail.jpg"
                             alt="product thumbnail"
                             class="w-12 h-12 rounded">
                        <div class="text-dark-grayish-blue">
                            <p>
                                Fall
                                Limited
                                Edition
                                Sneakers</p>
                            <p>
                                $125.00
                                x
                                3
                                <span id="card-quantity"></span>
                                <span id="card-total"
                                      class="font-bold text-very-dark-blue"></span>
                            </p>
                        </div>
                    </div>
                    <button id="delete-item-btn">
                        <img src="./images/icon-delete.svg"
                             alt="Delete item icon">
                    </button>
                </div>
                <button class="w-full bg-orange font-bold p-4 rounded-lg">
                    Checkout
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Mobile Menu -->
<div id="mobile-menu"
     class="hidden fixed inset-0 bg-black/60 md:hidden z-1">
    <!-- Menu Panel -->
    <div class="bg-white fixed top-0 h-full w-2/3 bg-off-white p-6 gap-8 flex flex-col">
        <!-- Close button -->
        <button id="menu-close-btn"
                class="cursor-pointer">
            <img src="./images/icon-close.svg"
                 alt="Close Menu">
        </button>

        <nav class="flex flex-col gap-4 text-black text-base font-bold">
            <a href=""
               class="hover:text-orange">Collections</a>
            <a href=""
               class="hover:text-orange">Men</a>
            <a href=""
               class="hover:text-orange">Women</a>
            <a href=""
               class="hover:text-orange">About</a>
            <a href=""
               class="hover:text-orange">Contact</a>
        </nav>
    </div>
</div>

<!-- Main -->
<main class="mb-4">
    <!-- Product Image Carousel -->
    <section class="relative">
        <img src="./images/image-product-1.jpg"
             alt="Product image"
             class="w-full lg:rounded-lg max-h-[296px] object-cover">

        <!-- Carousel Controls -->
        <div class="absolute top-1/2 -translate-y-1/2 inset-0 flex justify-between px-4 h-fit">
            <!-- Previous -->
            <button class="bg-white w-10 h-10 rounded-full flex items-center justify-center">
                <img src="./images/icon-previous.svg"
                     alt="Previous image icon"
                     class="relative right-[2px]">
            </button>
            <!-- Next -->
            <button class="bg-white w-10 h-10 rounded-full flex items-center justify-center">
                <img src="./images/icon-next.svg"
                     alt="Next image icon"
                     class="relative left-[2px]">
            </button>
        </div>
    </section>

    <!-- Product Information -->
    <section
            class="p-6 space-y-4">
        <!-- Company Name -->
        <h2 class="text-dark-grayish-blue text-xs font-bold uppercase tracking-widest">
            Sneaker Company
        </h2>

        <!-- Product Title -->
        <h1 class="text-3xl font-bold">
            Fall Limited
            Edition
            Sneakers</h1>

        <!-- Product Description -->
        <p class="text-dark-grayish-blue text-base">
            These low-profile
            sneakers are
            your perfect
            casual wear
            companion.
            Featuring a
            durable rubber
            outer sole,
            theyâ€™ll withstand
            everything
            the weather can
            offer.
        </p>

        <!-- Price Section -->
        <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
                <p class="font-bold text-3xl">
                    $125.00</p>
                <span class="bg-black text-white text-xs font-bold px-2 py-1 rounded">50%</span>
            </div>
            <p class="font-bold text-base text-dark-grayish-blue line-through">
                250.00
            </p>
        </div>

        <!-- Quantity Selector -->
        <div class="bg-light-grayish-blue flex items-center justify-between p-4 rounded-lg">
            <button id="minus-btn"
                    class="hover:opacity-60">
                <img src="./images/icon-minus.svg"
                     alt="Decrease quantity icon">
            </button>

            <span id="quantity-display"
                  class="font-bold text-black text-base">0</span>
            <button id="plus-btn"
                    class="hover:opacity-60">
                <img src="./images/icon-plus.svg"
                     alt="Increase quantity icon">
            </button>
        </div>

        <!-- Add to Cart -->
        <button id="add-to-cart-btn"
                class="w-full bg-orange text-sm font-bold p-4 rounded-lg shadow-2xl lg:shadow-none shadow-orange-200 flex items-center justify-center gap-4 hover:opacity-60 mb-8">
            <svg width="22"
                 height="20"
                 xmlns="http://www.w3.org/2000/svg">
                <path d="M20.925 3.641H3.863L3.61.816A.896.896 0 0 0 2.717 0H.897a.896.896 0 1 0 0 1.792h1l1.031 11.483c.073.828.52 1.726 1.291 2.336C2.83 17.385 4.099 20 6.359 20c1.875 0 3.197-1.87 2.554-3.642h4.905c-.642 1.77.677 3.642 2.555 3.642a2.72 2.72 0 0 0 2.717-2.717 2.72 2.72 0 0 0-2.717-2.717H6.365c-.681 0-1.274-.41-1.53-1.009l14.321-.842a.896.896 0 0 0 .817-.677l1.821-7.283a.897.897 0 0 0-.87-1.114ZM6.358 18.208a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm10.015 0a.926.926 0 0 1 0-1.85.926.926 0 0 1 0 1.85Zm2.021-7.243-13.8.81-.57-6.341h15.753l-1.383 5.53Z"
                      fill-rule="nonzero"/>
            </svg>
            Add to Cart
        </button>
    </section>
</main>

<script>
    /* Mobile Menu */
    const menuOpenBtn = document.getElementById('menu-open-btn');
    const menuCloseBtn = document.getElementById('menu-close-btn');
    const mobileMenu = document.getElementById('mobile-menu');

    const openMenu = () => {
        mobileMenu.classList.remove('hidden');
    };

    const closeMenu = () => {
        mobileMenu.classList.add('hidden');
    };

    menuOpenBtn.addEventListener('click', openMenu);
    menuCloseBtn.addEventListener('click', closeMenu);

    mobileMenu.addEventListener('click', (event) => {
        if (event.target === mobileMenu) {
            closeMenu();
        }
    });

    /* Cart and Quantity Logic */
    /* References */
    const cartBtn = document.getElementById('cart-btn');
    const cartPopup = document.getElementById('cart-popup');
    const plusBtn = document.getElementById('plus-btn');
    const minusBtn = document.getElementById('minus-btn');
    const quantityDisplay = document.getElementById('quantity-display');
    const addToCartBtn = document.getElementById('add-to-cart-btn');
    const cartBadge = document.getElementById('cart-badge');
    const emptyCartMsg = document.getElementById('empty-cart-msg');
    const filledCartContent = document.getElementById('filled-cart-content');
    const cartQuantitySpan = document.getElementById('cart-quantity');
    const cartTotalSpan = document.getElementById('cart-total');
    const deleteItemBtn = document.getElementById('delete-item-btn');

    /* Initialize variables */
    let quantity = 0;
    let cartItemCount = 0;
    const itemPrice = 125.00;

    // Functions to update the UI
    const updateQuantityDisplay = () => {
        quantityDisplay.textContent = quantity.toString();
    }

    const updateCart = () => {
        // Update badge visibility and count
        if (cartItemCount > 0) {
            cartBadge.classList.remove('hidden');
            cartBadge.textContent = cartItemCount.toString();
        } else {
            cartBadge.classList.add('hidden');
        }

        // Update cart popup content
        if (cartItemCount > 0) {
            emptyCartMsg.classList.add('hidden');
            filledCartContent.classList.remove('hidden');
            cartQuantitySpan.textContent = cartItemCount.toString();
            cartTotalSpan.textContent = `$${(itemPrice * cartItemCount).toFixed(2)}`;
        } else {
            emptyCartMsg.classList.remove('hidden');
            filledCartContent.classList.add('hidden');
        }
    }

    /* Event Listeners */
    // Toggle cart popup visibility
    cartBtn.addEventListener('click', () => {
        cartPopup.classList.toggle('hidden');
    })

    // Increase and decrease quantity
    plusBtn.addEventListener('click', () => {
        quantity++;
        updateQuantityDisplay();
    })

    minusBtn.addEventListener('click', () => {
        if (quantity > 0) {
            quantity--;
            updateQuantityDisplay();
        }
    })

    // Add quantity to cart
    addToCartBtn.addEventListener('click', () => {
        if (quantity > 0) {
            cartItemCount += quantity;
            updateCart();
            quantity = 0;
            updateQuantityDisplay();
        }
    })

    // Delete item from cart
    // Note: since we only have one product, this will clear the cart, and the logic is simple
    deleteItemBtn.addEventListener('click', () => {
        cartItemCount = 0;      // No need to check for quantity, just clear the cart, because we only have one product
        updateCart();
    })
</script>
</body>
</html>